# CircleCI Environment Variables Template
#
# This file documents all environment variables that need to be configured
# in CircleCI Project Settings for the CI/CD pipeline to work.
#
# ⚠️ DO NOT commit actual values to Git!
# This is a template for documentation purposes only.
#
# HOW TO ADD VARIABLES TO CIRCLECI:
# 1. Go to https://app.circleci.com/
# 2. Navigate to Projects → shadcoding-task1 → Project Settings (⚙️ icon)
# 3. Click "Environment Variables" in left sidebar
# 4. Click "Add Environment Variable"
# 5. Enter Name and Value
# 6. Click "Add Environment Variable"

# =============================================================================
# REQUIRED VARIABLES (Pipeline will fail without these)
# =============================================================================

# AWS Server IP Address
# Location to add: CircleCI Project Settings → Environment Variables
# Usage: SSH deployment to AWS server
SERVER_IP=18.217.70.110

# Deployment User on AWS Server
# Location to add: CircleCI Project Settings → Environment Variables
# Usage: SSH login username for deployment
DEPLOY_USER=deploy

# =============================================================================
# SSH KEY CONFIGURATION
# =============================================================================

# SSH Private Key Fingerprint
# Location to add: .circleci/config.yml (line 123)
# How to get:
#   1. Generate SSH key: ssh-keygen -t ed25519 -C "circleci-deploy"
#   2. Add public key to AWS server: ~/.ssh/authorized_keys
#   3. Add private key to CircleCI: Project Settings → SSH Keys
#   4. Copy the fingerprint from CircleCI after adding the key
#   5. Paste in .circleci/config.yml under add_ssh_keys → fingerprints
#
# Example fingerprint format:
#   Old: a7:3b:9c:2e:4d:8f:1a:6b:...
#   New: SHA256:gH7k8L2mP4qR9sT1uV3wX5yZ...
#
# Note: The fingerprint itself is not sensitive, but the private key is!
SSH_KEY_FINGERPRINT=<your-ssh-fingerprint-here>

# =============================================================================
# OPTIONAL VARIABLES (Only if needed)
# =============================================================================

# Django Secret Key (Optional)
# Location to add: CircleCI Project Settings → Environment Variables
# Usage: If you need to run migrations or Django commands during CI/CD
# Note: Usually not needed because .env file already exists on server
# DJANGO_SECRET_KEY=<your-django-secret-key>

# Database URL (Optional)
# Location to add: CircleCI Project Settings → Environment Variables
# Usage: If you want to use PostgreSQL instead of SQLite
# Note: Not needed if using SQLite (current setup)
# DATABASE_URL=postgresql://user:password@host:5432/dbname

# Statens Vegvesen API Key (Optional)
# Location to add: CircleCI Project Settings → Environment Variables
# Usage: Vehicle lookup API integration
# Note: Usually not needed because .env file already exists on server
# STATENS_VEGVESEN_API_KEY=<your-api-key>

# =============================================================================
# CIRCLECI BUILT-IN VARIABLES (Available automatically)
# =============================================================================

# These variables are provided by CircleCI automatically.
# You don't need to add them. Listed here for reference.

# CIRCLE_BRANCH - Current Git branch (e.g., "main")
# CIRCLE_SHA1 - Current Git commit SHA
# CIRCLE_BUILD_NUM - Build number
# CIRCLE_PROJECT_REPONAME - Repository name
# CIRCLE_PROJECT_USERNAME - GitHub username/organization
# CIRCLE_WORKING_DIRECTORY - Working directory path in container

# Full list: https://circleci.com/docs/variables/#built-in-environment-variables

# =============================================================================
# VERIFICATION CHECKLIST
# =============================================================================

# Before triggering your first build, verify:
# ✅ SERVER_IP added to CircleCI Environment Variables
# ✅ DEPLOY_USER added to CircleCI Environment Variables
# ✅ SSH private key added to CircleCI SSH Keys
# ✅ SSH public key added to AWS server ~/.ssh/authorized_keys
# ✅ SSH fingerprint updated in .circleci/config.yml
# ✅ Permissions on server: chmod 700 ~/.ssh && chmod 600 ~/.ssh/authorized_keys
# ✅ Test SSH connection: ssh -i <private-key> deploy@18.217.70.110

# =============================================================================
# SECURITY BEST PRACTICES
# =============================================================================

# ✅ DO:
# - Store all secrets in CircleCI Environment Variables (encrypted)
# - Use separate SSH keys for CircleCI (don't reuse personal keys)
# - Regularly rotate SSH keys and secrets
# - Use environment-specific variables (dev, staging, prod)
# - Document all required variables in this file

# ❌ DON'T:
# - Commit secrets to Git (even in private repositories)
# - Share SSH private keys between team members
# - Use same credentials across multiple projects
# - Print secrets in CI logs (echo, console.log, etc.)
# - Store secrets in code comments

# =============================================================================
# TROUBLESHOOTING
# =============================================================================

# If deployment fails with "Permission denied (publickey)":
# 1. Verify SSH key is added to CircleCI: Project Settings → SSH Keys
# 2. Verify fingerprint is correct in .circleci/config.yml
# 3. Verify public key is on AWS server: cat ~/.ssh/authorized_keys
# 4. Verify permissions: ls -la ~/.ssh/authorized_keys (should be -rw-------)
# 5. Test SSH manually: ssh -i ~/.ssh/circleci_deploy deploy@18.217.70.110

# If environment variables are not working:
# 1. Verify variables are added to CircleCI: Project Settings → Environment Variables
# 2. Check variable names match exactly (case-sensitive!)
# 3. Re-run the pipeline (don't just re-run failed job)
# 4. Check CircleCI docs: https://circleci.com/docs/env-vars/

# =============================================================================
# RESOURCES
# =============================================================================

# CircleCI Documentation: https://circleci.com/docs/
# Environment Variables: https://circleci.com/docs/env-vars/
# SSH Keys: https://circleci.com/docs/add-ssh-key/
# Project Setup Guide: See CIRCLECI_SETUP.md
# CI/CD Learning Guide: See CIRCLECI_GUIDE.md
